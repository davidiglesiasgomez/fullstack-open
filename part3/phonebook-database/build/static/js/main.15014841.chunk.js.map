{"version":3,"sources":["components/Filter.js","components/Persons.js","components/PersonForm.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","newFilter","handleChangeFilter","value","onChange","Persons","persons","handleDelete","personsToShow","filter","person","name","match","RegExp","map","number","onClick","window","confirm","id","PersonForm","newName","newPhone","handleSubmit","handleChangeName","handleChangePhone","onSubmit","type","baseUrl","process","axios","get","newObject","post","delete","put","Notification","message","className","App","useState","setPersons","setNewName","setNewPhone","setNewFilter","errorMessage","setErrorMessage","useEffect","personService","then","response","data","catch","error","handleMessage","setTimeout","event","target","preventDefault","newPhoneObject","person_found","find","concat","console","log","status","alert","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.15014841.chunk.js","sourcesContent":["const Filter = ({ newFilter, handleChangeFilter }) => {\r\n  return (\r\n    <div>\r\n      filter shown with <input value={newFilter} onChange={handleChangeFilter} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter","const Persons = ({ newFilter, persons, handleDelete }) => {\r\n\r\n  const personsToShow = (\r\n    newFilter === ''\r\n    ? persons\r\n    : persons.filter((person) => person.name.match(new RegExp( newFilter, 'i' )))\r\n  )\r\n\r\n  return (\r\n    <>\r\n      {personsToShow.map(person =>\r\n        <p key={person.id}>{person.name} {person.number} <button onClick={() => { if (window.confirm(`Delete ${person.name}?`)) handleDelete(person.id) }}>delete</button></p>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Persons","const PersonForm = ({ newName, newPhone, handleSubmit, handleChangeName, handleChangePhone }) => {\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div>\r\n        name: <input value={newName} onChange={handleChangeName} />\r\n      </div>\r\n      <div>\r\n        phone: <input value={newPhone} onChange={handleChangePhone} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm","/* eslint-disable import/no-anonymous-default-export */\r\nimport axios from 'axios'\r\nconst baseUrl = process.env.REACT_APP_SERVICES_PERSONS_BASE_URL\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newObject => {\r\n  return axios.post(baseUrl, newObject)\r\n}\r\n\r\nconst remove = id => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nconst update = ( newObject, id ) => {\r\n  return axios.put(`${baseUrl}/${id}`, newObject)\r\n}\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  remove,\r\n  update\r\n}","const Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className={message.type}>\r\n        {message.message}\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport Persons from './components/Persons'\r\nimport PersonForm from './components/PersonForm'\r\nimport personService from './services/persons'\r\nimport Notification from './components/Notification'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newPhone, setNewPhone] = useState('')\r\n  const [newFilter, setNewFilter] = useState('')\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(response => {\r\n        setPersons(response.data)\r\n      })\r\n      .catch(error => {\r\n        handleMessage(`Server unavailable`, 'error')\r\n      })\r\n  }, [])\r\n\r\n  const handleChangeName = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleChangePhone = (event) => {\r\n    setNewPhone(event.target.value)\r\n  }\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault()\r\n\r\n    if (newName === '') {\r\n      alert(`It's necessary indicate a name`)\r\n      return\r\n    }\r\n\r\n    const newPhoneObject = {\r\n      name: newName,\r\n      number: newPhone\r\n    }\r\n\r\n    let person_found = persons.find((person) => person.name === newName) || null\r\n    if (person_found !== null) {\r\n      if ( !window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`) ) {\r\n        return\r\n      }\r\n\r\n      personService\r\n        .update(newPhoneObject, person_found.id)\r\n        .then(response => {\r\n          setPersons(persons.map(person => person.id !== person_found.id ? person : response.data))\r\n          setNewName('')\r\n          setNewPhone('')\r\n          handleMessage(`Modified ${newName}`, 'success')\r\n        })\r\n        .catch(error => {\r\n          if (error.response.status === 404 || error.response.status === 400) {\r\n            handleMessage(`Error: ${error.response.data.error}`, 'error')\r\n            return\r\n          }\r\n          setPersons(persons.filter(person => person.id !== person_found.id))\r\n          handleMessage(`Information of ${newName} has already removed from server`, 'error')\r\n        })\r\n      return\r\n    }\r\n\r\n    personService\r\n      .create(newPhoneObject)\r\n      .then(response => {\r\n        setPersons(persons.concat(response.data))\r\n        console.log({persons})\r\n        setNewName('')\r\n        setNewPhone('')\r\n        handleMessage(`Added ${newName}`, 'success')\r\n      })\r\n      .catch(error => {\r\n        if (error.response.status === 400) {\r\n            handleMessage(`Error: ${error.response.data.error}`, 'error')\r\n            return\r\n        }\r\n        handleMessage(`Server unavailable`, 'error')\r\n      })\r\n  }\r\n\r\n  const handleChangeFilter = (event) => {\r\n    setNewFilter(event.target.value)\r\n  }\r\n\r\n  const handleDelete = (id) => {\r\n    personService\r\n      .remove(id)\r\n      .then(response => {\r\n        setPersons(persons.filter(person => person.id !== id))\r\n        handleMessage(`Deleted`, 'success')\r\n      })\r\n      .catch(error => {\r\n        setPersons(persons.filter(person => person.id !== id))\r\n        handleMessage(`Information has already removed from server`, 'error')\r\n      })\r\n  }\r\n\r\n  const handleMessage = (message, type) => {\r\n    setErrorMessage({message: message, type: type})\r\n    setTimeout(() => {\r\n      setErrorMessage({})\r\n    }, 5000)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Phonebook</h1>\r\n      <Notification message={errorMessage} />\r\n      <h2>Filter</h2>\r\n      <Filter newFilter={newFilter} handleChangeFilter={handleChangeFilter} />\r\n      <h2>Add a new</h2>\r\n      <PersonForm\r\n        newName={newName}\r\n        newPhone={newPhone}\r\n        handleSubmit={handleSubmit}\r\n        handleChangeName={handleChangeName}\r\n        handleChangePhone={handleChangePhone}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons\r\n        newFilter={newFilter}\r\n        persons={persons}\r\n        handleDelete={handleDelete}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}